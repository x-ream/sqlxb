# xb AI åº”ç”¨ç”Ÿæ€

## ğŸ“‹ æ¦‚è¿°

æœ¬ç›®å½•åŒ…å« xb åœ¨ AI åº”ç”¨åœºæ™¯ä¸‹çš„é›†æˆæŒ‡å—ã€æœ€ä½³å®è·µå’Œç¤ºä¾‹ä»£ç ã€‚xb çš„ AI-First è®¾è®¡ä½¿å…¶æˆä¸º RAGã€AI Agent å’Œå‘é‡æ£€ç´¢åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. AI-Friendly API è®¾è®¡
- **å‡½æ•°å¼ API**: æ˜“äº AI ç†è§£å’Œç”Ÿæˆ
- **ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨**: å‡å°‘è¿è¡Œæ—¶é”™è¯¯
- **è‡ªåŠ¨è¿‡æ»¤æœºåˆ¶**: æ™ºèƒ½å¤„ç† nil/0 å€¼
- **å¯é¢„æµ‹çš„è¡Œä¸º**: ç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡º

### 2. å‘é‡æ•°æ®åº“åŸç”Ÿæ”¯æŒ
- **PostgreSQL pgvector**: å…³ç³»å‹ + å‘é‡èƒ½åŠ›
- **Qdrant æ·±åº¦é›†æˆ**: é«˜æ€§èƒ½å‘é‡æ£€ç´¢
- **æ··åˆæ£€ç´¢**: æ ‡é‡è¿‡æ»¤ + å‘é‡æœç´¢
- **å¤šç§è·ç¦»åº¦é‡**: Cosine, L2, Inner Product

### 3. RAG åœºæ™¯ä¼˜åŒ–
- **Chunk å­˜å‚¨æ¨¡å¼**: é«˜æ•ˆçš„æ–‡æ¡£åˆ†å—å­˜å‚¨
- **å…ƒæ•°æ®ç®¡ç†**: çµæ´»çš„è¿‡æ»¤å’Œæ£€ç´¢
- **é‡æ’åºæ”¯æŒ**: MMR, Hash, Distance å¤šæ ·æ€§ç­–ç•¥

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### å¿«é€Ÿå¼€å§‹
- [AI Agent å·¥å…·é“¾](./AGENT_TOOLKIT.md) - JSON Schemaã€OpenAPI è§„èŒƒç”Ÿæˆ
- [RAG æœ€ä½³å®è·µ](./RAG_BEST_PRACTICES.md) - æ–‡æ¡£æ£€ç´¢åº”ç”¨æ„å»ºæŒ‡å—

### ç”Ÿæ€é›†æˆ
- [LangChain é›†æˆ](./LANGCHAIN_INTEGRATION.md) - Python LangChain é›†æˆç¤ºä¾‹
- [LlamaIndex é›†æˆ](./LLAMAINDEX_INTEGRATION.md) - Python LlamaIndex é›†æˆç¤ºä¾‹
- [Semantic Kernel é›†æˆ](./SEMANTIC_KERNEL_INTEGRATION.md) - .NET Semantic Kernel é›†æˆ

### é«˜çº§ä¸»é¢˜
- [è‡ªç„¶è¯­è¨€æŸ¥è¯¢è½¬æ¢](./NL2SQL.md) - å®éªŒæ€§ NL â†’ SQL è½¬æ¢
- [æ··åˆæ£€ç´¢ç­–ç•¥](./HYBRID_SEARCH.md) - æ ‡é‡ + å‘é‡æ··åˆæ£€ç´¢
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](./PERFORMANCE.md) - AI åº”ç”¨æ€§èƒ½è°ƒä¼˜

## ğŸš€ å¿«é€Ÿç¤ºä¾‹

### åŸºç¡€ RAG æŸ¥è¯¢

```go
package main

import (
    "github.com/fndome/xb"
)

type DocumentChunk struct {
    ID        int64     `json:"id"`
    Content   string    `json:"content"`
    Embedding []float32 `json:"embedding"`
    Metadata  string    `json:"metadata"` // JSON
    DocID     *int64    `json:"doc_id"`   // åŸæ–‡æ¡£IDï¼ˆéä¸»é”®ï¼Œå¯ä¸º nilï¼‰
}

func SearchSimilarChunks(queryVector []float32, limit int) (string, []interface{}, error) {
    return xb.Of(&DocumentChunk{}).
        VectorSearch("embedding", queryVector).
        Limit(limit).
        Build()
}
```

### Qdrant æ··åˆæ£€ç´¢

```go
func HybridSearch(queryVector []float32, docType string, minScore float64) (string, error) {
    built := xb.Of(&DocumentChunk{}).
        VectorSearch("embedding", queryVector, 20).  // è¿”å› 20 æ¡
        Eq("doc_type", docType).                      // æ ‡é‡è¿‡æ»¤
        Ne("status", "deleted").                      // æ’é™¤å·²åˆ é™¤
        QdrantX(func(qx *xb.QdrantBuilderX) {
            qx.ScoreThreshold(float32(minScore))
        }).
        Build()

    return built.ToQdrantJSON()
}
```

### LangChain å‘é‡å­˜å‚¨

```python
from langchain.vectorstores import Qdrant
from langchain.embeddings import OpenAIEmbeddings

# ä½¿ç”¨ xb ç”Ÿæˆçš„ Qdrant æŸ¥è¯¢
vector_store = Qdrant(
    client=qdrant_client,
    collection_name="documents",
    embeddings=OpenAIEmbeddings(),
)

results = vector_store.similarity_search_with_score(
    query="å¦‚ä½•ä½¿ç”¨ xb?",
    k=5,
    filter={
        "must": [
            {"key": "doc_type", "match": {"value": "tutorial"}}
        ]
    }
)
```

## ğŸ—ï¸ å…¸å‹åº”ç”¨æ¶æ„

### RAG çŸ¥è¯†åº“ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·æŸ¥è¯¢                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 LLM Embedding API                        â”‚
â”‚              (OpenAI, Cohere, æœ¬åœ°æ¨¡å‹)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  xb æŸ¥è¯¢æ„å»º                          â”‚
â”‚   â€¢ VectorSearch() - å‘é‡ç›¸ä¼¼åº¦                          â”‚
â”‚   â€¢ Eq/Ne/In - å…ƒæ•°æ®è¿‡æ»¤                                â”‚
â”‚   â€¢ WithScoreThreshold - ç›¸å…³æ€§é˜ˆå€¼                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Qdrant / PostgreSQL+pgvector                â”‚
â”‚              (å‘é‡æ•°æ®åº“å±‚)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   é‡æ’åº & åå¤„ç†                        â”‚
â”‚   â€¢ MMR å¤šæ ·æ€§ç®—æ³•                                       â”‚
â”‚   â€¢ å…ƒæ•°æ®å¢å¼º                                          â”‚
â”‚   â€¢ ä¸Šä¸‹æ–‡åˆå¹¶                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LLM ç”Ÿæˆå›ç­”                            â”‚
â”‚              (GPT-4, Claude, Llama)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI Agent å·¥å…·é“¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AI Agent (GPT-4)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Function Calling / Tool Use                 â”‚
â”‚   â€¢ search_knowledge_base()                              â”‚
â”‚   â€¢ filter_by_metadata()                                 â”‚
â”‚   â€¢ get_similar_documents()                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           xb åŠ¨æ€æŸ¥è¯¢æ„å»º (JSON Schema)               â”‚
â”‚   â€¢ å‚æ•°éªŒè¯                                            â”‚
â”‚   â€¢ æŸ¥è¯¢ä¼˜åŒ–                                            â”‚
â”‚   â€¢ å®‰å…¨æ£€æŸ¥                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®åº“æ‰§è¡Œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ é€‚ç”¨åœºæ™¯

### âœ… æ¨èä½¿ç”¨åœºæ™¯

1. **RAG åº”ç”¨**
   - ä¼ä¸šçŸ¥è¯†åº“
   - å®¢æˆ·æœåŠ¡æœºå™¨äºº
   - æ–‡æ¡£é—®ç­”ç³»ç»Ÿ
   - ä»£ç æœç´¢å¼•æ“

2. **AI Agent ç³»ç»Ÿ**
   - è‡ªä¸»æ•°æ®åˆ†æ Agent
   - å¤šæºä¿¡æ¯èšåˆ Agent
   - æ™ºèƒ½æ¨èç³»ç»Ÿ
   - ä¸ªæ€§åŒ–å†…å®¹ç”Ÿæˆ

3. **æ··åˆæ£€ç´¢åº”ç”¨**
   - ç”µå•†å•†å“æœç´¢ï¼ˆæ–‡æœ¬+å›¾åƒï¼‰
   - å¤šæ¨¡æ€å†…å®¹æ£€ç´¢
   - è¯­ä¹‰åŒ–æ—¥å¿—åˆ†æ
   - æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ

4. **å‘é‡æ•°æ®åº“åº”ç”¨**
   - ç›¸ä¼¼å†…å®¹æ¨è
   - å›¾åƒ/éŸ³é¢‘æ£€ç´¢
   - ç”¨æˆ·è¡Œä¸ºåˆ†æ
   - å¼‚å¸¸æ£€æµ‹

### âš ï¸ ä¸é€‚ç”¨åœºæ™¯

- çº¯å…³ç³»å‹ OLTPï¼ˆä½¿ç”¨æ ‡å‡† ORM å³å¯ï¼‰
- è¶…å¤§è§„æ¨¡åˆ†ææŸ¥è¯¢ï¼ˆè€ƒè™‘ä¸“ç”¨ OLAPï¼‰
- å®æ—¶æµå¤„ç†ï¼ˆè€ƒè™‘ Flink/Sparkï¼‰

## ğŸ§ª ç¤ºä¾‹é¡¹ç›®

### 1. RAG çŸ¥è¯†åº“ (Go + Qdrant)
- **ç›®å½•**: `examples/rag-knowledge-base/`
- **æŠ€æœ¯æ ˆ**: Go, xb, Qdrant, OpenAI
- **åŠŸèƒ½**: æ–‡æ¡£ä¸Šä¼ ã€åˆ†å—ã€å‘é‡åŒ–ã€æ£€ç´¢

### 2. AI Agent å·¥å…· (Python + LangChain)
- **ç›®å½•**: `examples/langchain-agent/`
- **æŠ€æœ¯æ ˆ**: Python, LangChain, xb (via API)
- **åŠŸèƒ½**: è‡ªç„¶è¯­è¨€æŸ¥è¯¢ã€å¤šå·¥å…·è°ƒç”¨ã€ç»“æœåˆæˆ

### 3. æ··åˆæ£€ç´¢ API (Go + PostgreSQL)
- **ç›®å½•**: `examples/hybrid-search-api/`
- **æŠ€æœ¯æ ˆ**: Go, xb, PostgreSQL+pgvector
- **åŠŸèƒ½**: REST APIã€æ ‡é‡+å‘é‡æ£€ç´¢ã€ç»“æœæ’åº

## ğŸ“Š æ€§èƒ½å‚è€ƒ

### å‘é‡æ£€ç´¢æ€§èƒ½ (Qdrant)

| æ•°æ®è§„æ¨¡ | Top-K | å“åº”æ—¶é—´ (P95) | ååé‡ (QPS) |
|---------|-------|----------------|-------------|
| 100K    | 10    | 15ms           | 2000        |
| 1M      | 10    | 30ms           | 1000        |
| 10M     | 10    | 80ms           | 400         |

### æ··åˆæ£€ç´¢æ€§èƒ½ (PostgreSQL+pgvector)

| æ•°æ®è§„æ¨¡ | è¿‡æ»¤æ¡ä»¶ | å“åº”æ—¶é—´ (P95) | ååé‡ (QPS) |
|---------|---------|----------------|-------------|
| 100K    | 2ä¸ª      | 50ms           | 500         |
| 1M      | 2ä¸ª      | 120ms          | 200         |
| 10M     | 2ä¸ª      | 400ms          | 80          |

*æµ‹è¯•ç¯å¢ƒ: 4C8G, SSD, æœ¬åœ°éƒ¨ç½²*

## ğŸ”§ å¼€å‘å·¥å…·

### JSON Schema ç”Ÿæˆå™¨
```bash
go run ./tools/gen-json-schema -type DocumentChunk -output schema.json
```

### OpenAPI è§„èŒƒç”Ÿæˆå™¨
```bash
go run ./tools/gen-openapi -package main -output openapi.yaml
```

### è‡ªç„¶è¯­è¨€æŸ¥è¯¢æµ‹è¯•
```bash
go run ./tools/nl2sql -query "æŸ¥æ‰¾æœ€è¿‘7å¤©åˆ›å»ºçš„æ´»è·ƒç”¨æˆ·"
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®æ–°çš„ AI åº”ç”¨é›†æˆå’Œç¤ºä¾‹ï¼

### è´¡çŒ®ç±»å‹
1. **æ–°æ¡†æ¶é›†æˆ**: Haystack, AutoGen, CrewAI ç­‰
2. **ç¤ºä¾‹é¡¹ç›®**: å®Œæ•´å¯è¿è¡Œçš„ AI åº”ç”¨
3. **æœ€ä½³å®è·µ**: æ€§èƒ½ä¼˜åŒ–ã€æ¶æ„æ¨¡å¼
4. **æ–‡æ¡£ç¿»è¯‘**: è‹±æ–‡ã€æ—¥æ–‡ç­‰

### æäº¤æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æ·»åŠ æ–‡æ¡£/ä»£ç 
4. æäº¤ Pull Request

è¯¦è§: [CONTRIBUTING.md](../CONTRIBUTING.md)

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- **GitHub Issues**: é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½å»ºè®®
- **GitHub Discussions**: AI åº”ç”¨è®¨è®ºå’Œç»éªŒåˆ†äº«
- **ç¤ºä¾‹é—®é¢˜**: æä¾›å®Œæ•´çš„å¯å¤ç°ä»£ç 

## ğŸ“„ è®¸å¯è¯

ä¸ xb ä¸»é¡¹ç›®ç›¸åŒï¼Œé‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**è®© AI å’Œäººç±»éƒ½èƒ½è½»æ¾æ„å»ºé«˜æ€§èƒ½æ•°æ®åº“åº”ç”¨ï¼** ğŸš€

